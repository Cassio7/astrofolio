---
import { getCollection } from "astro:content";
import ArticleItem from "../../../components/article-item.astro";
import PageLayout from "@/layouts/page-layout.astro";

export async function getStaticPaths() {
  const articels = await getCollection("blog");
  return articels.map(article => ({
    params: { category: article.data.category },
  }));
}

const { category } = Astro.params;

const articels = await getCollection("blog");
const categoryArticles = articels.filter(
  article => article.data.category === category
);

// Page properties
const title = category;
const description = `
      I talk about frontend, backend, fullstack, productivity and just what ever
      i encouter and learn in my journey as a software engineer
    `;
---

<PageLayout description={description} title={title}>
  <section class="space-y-3">
    <h3 class="text-xl font-semibold">Articles</h3>
    <ul class="flex w-full flex-col items-start justify-start gap-8">
      {categoryArticles.map(article => <ArticleItem article={article} />)}
    </ul>
  </section>
</PageLayout>
